{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\Front End Development\\\\meal-planner-main\\\\src\\\\components\\\\RecipeSearch.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport useMealStore from '../services/useMealstore';\nimport { saveMeal } from '../services/mealServices';\nimport { fetchPantryItems } from '../services/pantryServices';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RecipeSearch = ({\n  closeSearch\n}) => {\n  _s();\n  const {\n    recipes,\n    pantryItems,\n    fetchRecipesBasedOnPantry,\n    isLoading,\n    fetchRecipeDetails\n  } = useMealStore();\n  const [debouncedPantryItems, setDebouncedPantryItems] = useState(pantryItems);\n  const [updateTrigger, setUpdateTrigger] = useState(false);\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedPantryItems(pantryItems);\n    }, 2000);\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [pantryItems]);\n  useEffect(() => {\n    if (debouncedPantryItems.length === 0) {\n      fetchPantryItems(pantryItems => {\n        fetchRecipesBasedOnPantry(pantryItems);\n      });\n    } else {\n      fetchRecipesBasedOnPantry(debouncedPantryItems);\n    }\n  }, [debouncedPantryItems, fetchRecipesBasedOnPantry, fetchPantryItems]);\n  const handleRecipeClick = async recipeId => {\n    const recipe = recipes.find(r => r.id === recipeId);\n    console.log('details:', recipe);\n    if (recipe) {\n      await fetchRecipeDetails(recipeId);\n      const updatedDetails = useMealStore.getState().recipeDetails;\n      if (updatedDetails) {\n        const ingredients = [];\n        const steps = [];\n        updatedDetails.forEach(section => {\n          section.steps.forEach(step => {\n            steps.push(step.step);\n            step.ingredients.forEach(ingredient => {\n              ingredients.push({\n                name: ingredient.name,\n                image: ingredient.image,\n                id: ingredient.id\n              });\n            });\n          });\n        });\n        //console.log(\"myingredients\", ingredients);\n        //console.log(\"mysteps\", steps);\n\n        const newRecipe = {\n          title: recipe.title,\n          steps: steps,\n          ingredients: ingredients,\n          type: ''\n        };\n        saveMeal({\n          mealName: recipe.title,\n          recipe: newRecipe,\n          mealType: newRecipe.type,\n          day: 'Any',\n          imageUrl: recipe.image\n        }, () => {\n          console.log('Meal saved successfully');\n          setUpdateTrigger(!updateTrigger);\n        });\n      }\n    }\n    closeSearch();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"suggestions-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Recipes Based on Your Pantry\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading recipes...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: recipes.map(recipe => /*#__PURE__*/_jsxDEV(\"li\", {\n        onClick: () => handleRecipeClick(recipe.id),\n        children: recipe.title\n      }, recipe.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(RecipeSearch, \"ttqeQlWvAyrcTn2J4GeaQGVmr9M=\", false, function () {\n  return [useMealStore];\n});\n_c = RecipeSearch;\nRecipeSearch.propTypes = {\n  closeSearch: PropTypes.func.isRequired\n};\nexport default RecipeSearch;\nvar _c;\n$RefreshReg$(_c, \"RecipeSearch\");","map":{"version":3,"names":["React","useEffect","useState","PropTypes","useMealStore","saveMeal","fetchPantryItems","jsxDEV","_jsxDEV","RecipeSearch","closeSearch","_s","recipes","pantryItems","fetchRecipesBasedOnPantry","isLoading","fetchRecipeDetails","debouncedPantryItems","setDebouncedPantryItems","updateTrigger","setUpdateTrigger","handler","setTimeout","clearTimeout","length","handleRecipeClick","recipeId","recipe","find","r","id","console","log","updatedDetails","getState","recipeDetails","ingredients","steps","forEach","section","step","push","ingredient","name","image","newRecipe","title","type","mealName","mealType","day","imageUrl","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","onClick","_c","propTypes","func","isRequired","$RefreshReg$"],"sources":["D:/Work/Front End Development/meal-planner-main/src/components/RecipeSearch.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport useMealStore from '../services/useMealstore';\nimport { saveMeal } from '../services/mealServices';\nimport { fetchPantryItems } from '../services/pantryServices';\n\nconst RecipeSearch = ({ closeSearch }) => {\n  const { recipes, pantryItems, fetchRecipesBasedOnPantry, isLoading, fetchRecipeDetails } = useMealStore();\n  const [debouncedPantryItems, setDebouncedPantryItems] = useState(pantryItems);\n  const [updateTrigger, setUpdateTrigger] = useState(false);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedPantryItems(pantryItems);\n    }, 2000); \n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [pantryItems]);\n  useEffect(() => {\n    if (debouncedPantryItems.length === 0) {\n      fetchPantryItems((pantryItems) => {\n        fetchRecipesBasedOnPantry(pantryItems);\n      });\n    } else {\n      fetchRecipesBasedOnPantry(debouncedPantryItems);\n    }\n  }, [debouncedPantryItems, fetchRecipesBasedOnPantry, fetchPantryItems]);\n\n  const handleRecipeClick = async (recipeId) => {\n    const recipe = recipes.find(r => r.id === recipeId); \n    console.log('details:', recipe);\n    if (recipe) {\n        await fetchRecipeDetails(recipeId); \n        const updatedDetails = useMealStore.getState().recipeDetails;\n\n        if (updatedDetails) {\n          const ingredients = [];\n          const steps = [];\n    \n          updatedDetails.forEach((section) => {\n            section.steps.forEach((step) => {\n              steps.push(step.step);\n    \n              step.ingredients.forEach((ingredient) => {\n                ingredients.push({\n                  name: ingredient.name,\n                  image: ingredient.image,\n                  id: ingredient.id\n                });\n              });\n            });\n          });   \n          //console.log(\"myingredients\", ingredients);\n          //console.log(\"mysteps\", steps);\n\n          const newRecipe = {\n            title: recipe.title,\n            steps: steps,\n            ingredients: ingredients,\n            type: ''\n          };\n\n          saveMeal({\n            mealName: recipe.title,\n            recipe: newRecipe,\n            mealType: newRecipe.type, \n            day: 'Any', \n            imageUrl: recipe.image\n          }, () => {\n            console.log('Meal saved successfully');\n            setUpdateTrigger(!updateTrigger); \n          });\n        } \n\n    }\n    closeSearch();\n};\n\n  return (\n    <div className=\"suggestions-form\">\n        <h1>Recipes Based on Your Pantry</h1>\n        {isLoading && <p>Loading recipes...</p>}\n        <ul>\n            {recipes.map((recipe) => (\n                <li key={recipe.id} onClick={() => handleRecipeClick(recipe.id)}>\n                    {recipe.title}\n                </li>\n            ))}\n        </ul>\n    </div>\n);\n};\n\nRecipeSearch.propTypes = {\n  closeSearch: PropTypes.func.isRequired,\n};\n\nexport default RecipeSearch;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}